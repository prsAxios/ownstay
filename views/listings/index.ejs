<% layout('/layouts/boilerplate') %>
<style>
  .filters {
    margin-top: 1.5rem;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-around;
  }

  .filter {
    opacity: 0.8;
    width: 100px;
    padding: 10px 0;
    transition: opacity 0.3s ease;
  }

  .filter:hover {
    opacity: 1;
  }

  .filter i {
    font-size: 2rem;
  }

  .filter p {
    margin-bottom: 0;
  }

  .tax {
    display: none;
  }

  .form-check-reverse .form-check-input {
    border: 2px solid #ddd;
  }

  .listing-card {
    margin-bottom: 1.5rem;
  }

  .anchor {
    text-decoration: none;
    color: inherit;
  }

  .card-body {
    text-align: center;
  }
</style>

<body>
  <div class="filters">
    <div class="filter text-center fa-sx">
      <i class="fa-solid fa-bed"></i>
      <p>Bed</p>
    </div>
    <div class="filter text-center">
      <i class="fa-solid fa-square-h"></i>
      <p>Motels</p>
    </div>
    <div class="filter text-center">
      <i class="fa-solid fa-water"></i>
      <p>Ocean Rooms</p>
    </div>
    <div class="filter text-center">
      <i class="fa-solid fa-bicycle"></i>
      <p>Cycling</p>
    </div>
    <div class="filter text-center">
      <i class="fa-solid fa-umbrella"></i>
      <p>Beaches</p>
    </div>
    <div class="filter text-center">
      <i class="fa-solid fa-mountain"></i>
      <p>Mountains</p>
    </div>
    <div class="filter text-center">
      <i class="fa-solid fa-city"></i>
      <p>City</p>
    </div>
    <div class="filter text-center">
      <i class="fa-solid fa-campground"></i>
      <p>Camping</p>
    </div>
    <div class="filter text-center">
      <i class="fa-solid fa-tree"></i>
      <p>Forests</p>
    </div>
    <div class="filter text-center">
      <i class="fa-solid fa-skiing"></i>
      <p>Skiing</p>
    </div>
    <div class="filter text-center">
      <i class="fa-solid fa-hot-tub"></i>
      <p>Hot Tubs</p>
    </div>

    <div class="form-check form-switch mt-3">
      <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault">
      <label class="form-check-label" for="flexSwitchCheckDefault">Display Taxes</label>
    </div>
  </div>

  <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1 mt-3">
    <% for (let listing of allListings) { %>
      <a class="anchor" href="/listings/<%=listing.id%>">
        <div class="card col listing-card">
          <img src="<%= listing.image.url %>" class="card-img-top" alt="listing_image">
          <div class="card-img-overlay">test text</div>
          <div class="card-body">
            <h5 class="card-title"><b><%=listing.title%></b></h5>
            <h5 class="card-title"><%=listing.price.toLocaleString("en-IN")%>/night <span class="tax">+ 18% gst</span></h5>
          </div>
        </div>
      </a>
    <% } %>
  </div>

  <script>
    let taxSwitch = document.getElementById('flexSwitchCheckDefault');
    taxSwitch.addEventListener('change', () => {
      let taxInfo = document.getElementsByClassName('tax');
      for (let info of taxInfo) {
        info.style.display = taxSwitch.checked ? 'inline' : 'none';
      }
    });
  </script>
</body>
